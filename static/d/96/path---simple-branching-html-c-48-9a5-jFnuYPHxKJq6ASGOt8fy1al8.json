{"data":{"markdownRemark":{"html":"<p>今天的主角是分支，因为不介绍分支（ branch ）的概念，下面的操作是没办法介绍了。可以这样说，Git 最核心的操作对象是版本（ commit ），最核心的操作技巧就是分支。</p>\n<h2 id=\"什么是分支？\"><a href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E6%94%AF%EF%BC%9F\" aria-label=\"什么是分支？ permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>什么是分支？</h2>\n<p>仓库创建后，一旦有了新 commit，默认就会放到一个分支上，名字叫 master。前面咱们一直看到的多个版本组成的一条历史线，就是 master 分支。但是一个仓库内，用户可以自己创建其他的分支，可以有多条历史线。</p>\n<p>说说 master 这个名字，一般中文叫“主分支”，其实从技术底层来讲它跟其他我们自己要创建的分支没有区别，只不过它是天生的默认分支。实际工程项目中会人为的给它一个重要的使命，存放稳定代码。就像 github 公司<a href=\"http://scottchacon.com/2011/08/31/github-flow.html\">倡导</a>的。</p>\n<blockquote>\n<p>master 分支上的所有代码都应该是可以部署的</p>\n</blockquote>\n<p>意思就是 master 分支上的代码是随时可以放到产品服务器上跑的代码。这样，如果想开发一个新功能，可以新开分支。想象一下历史线上有很多节，每个版本就是一节。一个分支相当于一跟竹子，一节节的往上长。</p>\n<p><img src=\"https://img.haoqicat.com/2019031501.jpg\"></p>\n<p>但是实际上在底层并不是每个分支都拷贝出自己独立的一条历史线。其实 master 本身只是一个指针，指向 master 分支上最新的一个版本。这样由于每个 commit 都可以找到自己的前一个 commit，那么这条历史线就可以确定了。</p>\n<p><img src=\"https://img.haoqicat.com/2019031502.jpg\"></p>\n<h2 id=\"创建新分支\"><a href=\"#%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF\" aria-label=\"创建新分支 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>创建新分支</h2>\n<p>什么时候需要开一个新分支，这个后面讲各种工作流程的时候会介绍，今天先把基本操作学会。单击界面顶部的分支名，就可以显示所有分支。</p>\n<p><img src=\"https://img.haoqicat.com/2019031503.jpg\"></p>\n<p>如果想创建一个新分支，只需要点 <code>new branch</code> 按钮。</p>\n<p><img src=\"https://img.haoqicat.com/2019031504.jpg\"></p>\n<p>弹出的界面中可以看到</p>\n<blockquote>\n<p>Your new branch will be based on your currently checked out branch(master)</p>\n</blockquote>\n<p>意思是</p>\n<blockquote>\n<p>你的新分支会基于你的当前分支（ master ）.</p>\n</blockquote>\n<p>或者说白了就是，新分支会跟 master 有完全一样的历史。创建名为 idea 的分支。</p>\n<p><img src=\"https://img.haoqicat.com/2019031505.jpg\"></p>\n<p>可以看到新的 idea 分支下，项目历史线果然跟 master 分支一模一样。但是，在底层这个的实现是非常巧妙的，就是又创建一个新的 idea 指针，跟 master 指针指向同一个版本，根本没有拷贝历史线。</p>\n<p><img src=\"https://img.haoqicat.com/2019031506.jpg\"></p>\n<p>如果现在我对项目做一下修改，然后 commit 了。那么移动的只是 idea 指针，master 不变。就成了这样：</p>\n<p><img src=\"https://img.haoqicat.com/2019031507.jpg\"></p>\n<p>现在 master 分支包含两个版本 C1 和 C2，idea 分支包含三个版本 C1，C2，C3 。</p>\n<p>默认情况下这个 idea 分支只是存在于本地，如果想在远端仓库上发布这个分支，就点一下 idea 分支右侧的 <code>Publish Branch</code> 按钮。</p>\n<p>这样，到远端仓库看一下，发现果然多了一个 idea 分支，搜索框中，不但能搜索已有分支，还能创建新分支，看到了吧，很多操作在本地客户端和 github.com 上都能进行。</p>\n<p><img src=\"https://img.haoqicat.com/2019031508.jpg\"></p>\n<p>这就是创建新分支的原理和具体操作方式了。</p>\n<h2 id=\"切换分支\"><a href=\"#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF\" aria-label=\"切换分支 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>切换分支</h2>\n<p>下面来看如何在各个分支之间做切换。</p>\n<p>点 current branches 标签，就可以显示所有分支，想要切换到哪个分支，点一下就切换过去了。时间长了你会觉得这个也不够快，还是纯键盘操作快。敲 Cmd-B 可以打开分支切换框，输入名字回车，就切换成功了。</p>\n<p><img src=\"https://img.haoqicat.com/2019031509.jpg\"></p>\n<p>每次切换分支的时候，其实也是底层有一个名为 HEAD 的指针在不断发生变化，比如当然 HEAD 指向 master ，那么 master 就是当前分支。</p>\n<p><img src=\"https://img.haoqicat.com/2019031510.jpg\"></p>\n<p>注意，每次切换分支，项目代码，术语叫工作树（ Working Tree ）是会随着变化的，在编辑器中看看就知道了。</p>\n<p>这样，我们就学会了如何去切换分支。至于如何去删除一个分支，当前版本的客户端中没有这个功能，需要用命令行去操作，这里我们暂时不去介绍。</p>\n<h2 id=\"总结\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<p>只开测试分支，调好代码 commit 了之后，如果不把代码融合到 master 分支上是没有太大意义的，这就涉及到分支合并的问题了，这个是 git 最大最强的一块功能，后面介绍。</p>","fields":{"slug":"/simple_branching/"}},"indexJson":{"articles":[{"link":"introduction","title":"简介"},{"link":"github_in_browser","title":"浏览器中使用 GitHub"},{"link":"github_for_mac","title":"GitHub For Mac 客户端"},{"link":"simple_branching","title":"简单分支操作"},{"link":"merge","title":"合并分支"},{"link":"github_flow","title":"团队协作流程"},{"link":"fork_flow","title":"开源项目贡献流程"},{"link":"issues","title":"GitHub Issues"},{"link":"pages","title":"GitHub Pages 搭建网站"},{"link":"more","title":"更多 GitHub 技巧"}]}},"pageContext":{"slug":"/simple_branching/"}}